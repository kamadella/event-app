
<div *ngIf="canActivateEvent()">
<div *ngIf="currentEvent">

  <div>
    <img src={{currentEvent.img}} alt="event img" width="600" height="300">
  </div>
<div>

</div>
    <p> Kategoria: {{currentCategory.name}} </p>

    <h1>{{currentEvent.name}} </h1>
    <h2>Gdzie i kiedy</h2>
    <p> Data: {{currentEvent.date_start | date: "dd/MM/yy" }} - {{currentEvent.date_end | date: "dd/MM/yy"}} </p>
    <p> Lokalizacja: {{currentEvent.place_name}} </p>
    <h2>Opis wydarzenia</h2>
    <p>{{currentEvent.description}} </p>
    <h2>Organizator</h2>
    <p>{{currentEvent.organizator}} </p>
    <div *ngIf = "currentEvent && currentEvent.tickets && currentEvent.tickets > 0" >
      <h2>Bilety</h2>
      <p>{{currentEvent.ticketsLeft}} </p>
    </div>

</div>
<ng-container *ngIf="isLoggedIn(); else loginPanel">
  <div *ngIf="isActual()">
    <div *ngIf = "currentEvent && currentEvent.ticketsLeft && currentEvent.ticketsLeft > 0">
      <button (click)="openTicket(currentEvent)" class="btn btn-primary">
        Zarezerwuj bilet
      </button>
    </div>
  </div>
</ng-container>
<ng-template #loginPanel>
  <button (click)="openDialog()" class="btn btn-primary">
    Zarezerwuj bilet
  </button>
</ng-template>





<div *ngIf="isAdmin()">
  <hr>
  <div *ngIf = "currentEvent && currentEvent.tickets && currentEvent.tickets > 0">
    <button  class="btn btn-primary" routerLink="/admin/event/tickets/{{currentEvent.id}}">
      Zobacz bilety
    </button>
  </div>

  <button type="button" class="btn btn-danger" (click)="deleteEvent()">Usuń wydarzenie</button>
  <button
    class="btn btn-danger"
    *ngIf="currentEvent.published"
    (click)="publishEvent(false)"
    >
    UnPublish
  </button>
  <button
    *ngIf="!currentEvent.published"
    class="btn btn-success"
    (click)="publishEvent(true)">
    Publish
  </button>

  <button type="button" class="btn btn-primary" routerLink="/admin/event/edit/{{currentEvent.id}}">Edytuj</button>
</div>




<div class="py-5 text-center">
  <h3>Komentarze</h3>
  <hr>
</div>

<app-comments-list [eventId]="currentEvent.id"></app-comments-list>
<app-add-comment [eventId]="currentEvent.id"></app-add-comment>

</div>



<div *ngIf="!canActivateEvent()">
  <p>Nie masz uprawnień do przeglądania tego wydarzenia.</p>
</div>
